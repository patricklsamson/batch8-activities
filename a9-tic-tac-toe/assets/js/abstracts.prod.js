"use strict";function _toConsumableArray(r){return _arrayWithoutHoles(r)||_iterableToArray(r)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(r){if(Symbol.iterator in Object(r)||"[object Arguments]"===Object.prototype.toString.call(r))return Array.from(r)}function _arrayWithoutHoles(r){if(Array.isArray(r)){for(var t=0,e=new Array(r.length);t<r.length;t++)e[t]=r[t];return e}}var circle,i,endGame=!1,board=[["","",""],["","",""],["","",""]],historyObj={history:[],historyCounter:0,historyStorage:[],prevHistory:function(){var r,t,e,o,s;for((r=this.historyStorage).push.apply(r,_toConsumableArray(this.history.splice(this.history.length-1,1))),i=0;i<this.historyStorage.length;i++)add_class(id("history-wrap").querySelectorAll(this.historyStorage[i].inner)[this.history.length],this.historyStorage[i].delete),remove_class(qsel('[data-row="'.concat(this.historyStorage[i].rowPos,'"][data-col="').concat(this.historyStorage[i].colPos,'"]')),this.historyStorage[i].marker);for(i=0;i<this.historyStorage.length;i++)t=this.historyCounter-this.historyStorage.indexOf(this.historyStorage[i]);for(i=0;i<this.historyStorage.length;i++)e=this.historyStorage[i].marker;has_class(id("prev-btn"),"show")&&(console.log("Move ".concat(t," with mark ").concat(e.toUpperCase()," was undone.")),(o=console).log.apply(o,_toConsumableArray(this.historyStorage)),(s=console).log.apply(s,_toConsumableArray(this.history))),this.historyStorage.length<this.history.length&&add_class(id("next-btn"),"show"),0==this.history.length&&remove_class(id("prev-btn"),"show")},nextHistory:function(){var r,t,e,o,s;for((r=this.history).push.apply(r,_toConsumableArray(this.historyStorage.splice(this.historyStorage.length-1,1))),i=0;i<this.history.length;i++)remove_class(id("history-wrap").querySelectorAll(this.history[i].inner)[this.history.indexOf(this.history[i])],this.history[i].delete),add_class(qsel('[data-row="'.concat(this.history[i].rowPos,'"][data-col="').concat(this.history[i].colPos,'"]')),this.history[i].marker);for(i=0;i<this.history.length;i++)t=this.history.indexOf(this.history[i])+1;for(i=0;i<this.history.length;i++)e=this.history[i].marker;has_class(id("next-btn"),"show")&&(console.log("Move ".concat(t," with mark ").concat(e.toUpperCase()," was redone.")),(o=console).log.apply(o,_toConsumableArray(this.history)),(s=console).log.apply(s,_toConsumableArray(this.historyStorage))),this.history.length<this.historyStorage.length&&add_class(id("prev-btn"),"show"),0==this.historyStorage.length&&remove_class(id("next-btn"),"show")}},circleTurn=function(){add_class(id("tboard"),"o"),remove_class(id("tboard"),"x"),id("tooltip").innerHTML="Player O's turn."},crossTurn=function(){add_class(id("tboard"),"x"),remove_class(id("tboard"),"o"),id("tooltip").innerHTML="Player X's turn."},startGame=function(){circle=!1,id("player").innerHTML="X",(circle?circleTurn:crossTurn)()},markChecker=function(){id("mark-checker").checked?(circle=!0,id("player").innerHTML="O",id("mark-holder-wrap").querySelectorAll("p")[0].id="o",id("mark-holder-wrap").querySelectorAll("p")[1].id="x",id("mark-holder1").innerHTML="O",id("mark-holder2").innerHTML="X",circleTurn()):(circle=!1,id("player").innerHTML="X",crossTurn())},gameEnd=function(){for(endGame=!0,remove_class(id("tboard"),"x"),remove_class(id("tboard"),"o"),add_class(id("prev-btn"),"show"),i=0;i<qsel_all(".box").length;i++)remove_class(qsel_all(".box")[i],"empty")},handler=function r(t){if(!endGame){var e=t.target||t.srcElement,o=circle?"o":"x",s=e.dataset.row||e.getAttribute("data-row"),a=e.dataset.col||e.getAttribute("data-col");board[s][a]=o,add_class(e,o),remove_class(e,"empty"),((circle=!circle)?circleTurn:crossTurn)(),historyObj.history[historyObj.historyCounter]={marker:o,rowPos:s,colPos:a,inner:"p",delete:"strike"},historyObj.historyCounter++;var n=function(){var r;switch(s+a){case"00":r="top leftmost";break;case"01":r="top middle";break;case"02":r="top rightmost";break;case"10":r="middle leftmost";break;case"11":r="middle";break;case"12":r="middle rightmost";break;case"20":r="bottom leftmost";break;case"21":r="bottom middle";break;case"22":r="bottom rightmost"}return r};console.log("Move ".concat(historyObj.historyCounter,": Player ").concat(historyObj.history[historyObj.historyCounter-1].marker.toUpperCase()," puts their mark on the ").concat(n()," box."));var l=create_el("p");id("history-wrap").appendChild(l),l.innerHTML="".concat(historyObj.historyCounter," = ").concat(o.toUpperCase()," => ").concat(n());for(var h=function(t){setTimeout(function(){var r=create_el("span");for(r.innerHTML="l",id(t).appendChild(r),i=4;i<id(t).querySelectorAll("span").length;i+=5)add_class(id(t).querySelectorAll("span")[i-1],"five"),add_class(id(t).querySelectorAll("span")[i-1],"img"),add_class(id(t).querySelectorAll("span")[i-1],"con"),id(t).querySelectorAll("span")[i].innerHTML=" - "},250)},c=function(){9==historyObj.history.length?(id("tooltip").innerHTML="It's a draw!",console.log("The players ended in a draw."),h("draw")):(id("tooltip").innerHTML="Player ".concat(o.toUpperCase()," wins!"),console.log("Player ".concat(o.toUpperCase()," is the winner!")),h(o))},d=0;d<board.length;d++){var y=board[d][0],b=board[d][1],p=board[d][2];if(y&&y===b&&b===p)return gameEnd(),void c()}for(var m=0;m<board.length;m++){var u=board[0][m],g=board[1][m],_=board[2][m];if(u&&u===g&&g===_)return gameEnd(),void c()}var v=board[0][0],f=board[2][2],w=board[0][2],S=board[2][0],k=board[1][1];(v&&v===f&&f===k||w&&w===S&&S==k)&&(gameEnd(),c()),9==historyObj.history.length&&(gameEnd(),c())}remove_event(t.target||t.srcElement,"click",r)},reset=function(){endGame=!1,board=[["","",""],["","",""],["","",""]],historyObj.history=[],historyObj.historyCounter=0,historyObj.historyStorage=[],startGame(),markChecker(),console.clear(),id("history-wrap").innerHTML="",qsel_all(".box").forEach(function(r){add_event(r,"click",handler),add_class(r,"empty"),remove_class(r,"x"),remove_class(r,"o")}),remove_class(id("prev-btn"),"show"),remove_class(id("next-btn"),"show")};