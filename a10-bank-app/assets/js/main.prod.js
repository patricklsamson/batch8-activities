"use strict";function _defineProperties(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,a,t){return a&&_defineProperties(e.prototype,a),t&&_defineProperties(e,t),e}function _classCallCheck(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}doc_ready(function(){function u(e,a,t,n,o,r,c){_classCallCheck(this,u),this.firstName=e,this.middleName=a,this.lastName=t,this.gender=n,this.accountNumber=o,this.accountType=r,this.balance=c,this.transactionHistory=[]}var p,m=function(){function f(){_classCallCheck(this,f)}return _createClass(f,null,[{key:"userStorage",value:function(){var e=null===localStorage.getItem("users")?[]:JSON.parse(localStorage.getItem("users"));return e}},{key:"addUser",value:function(e){var a=f.userStorage();a.push(e),localStorage.setItem("users",JSON.stringify(a))}},{key:"time_stamp",value:function(){var e=new Date,a=e.getMonth()<10?"0".concat(e.getMonth()+1):e.getMonth()+1,t=e.getDate()<10?"0".concat(e.getDate()):e.getDate(),n="".concat(a,"/").concat(t,"/").concat(e.getFullYear()),o=e.getHours()<10?"0".concat(e.getHours()):e.getHours(),r=e.getMinutes()<10?"0".concat(e.getMinutes()):e.getMinutes(),c=e.getSeconds()<10?"0".concat(e.getSeconds()):e.getSeconds(),s="".concat(o,":").concat(r,":").concat(c);return"".concat(n," - ").concat(s)}},{key:"withdraw",value:function(a,e){var t,n,o=f.userStorage(),r=o.findIndex(function(e){return e.accountNumber==a});null==o[r]||""==o[r]?alert("User not found!"):parseFloat(o[r].balance)<parseFloat(e)?alert("Not enough money!"):0==parseFloat(e)?alert("Enter an amount!"):(t="male"==o[r].gender?"his":"her",o[r].balance=parseFloat(parseFloat(o[r].balance)-parseFloat(e)).toFixed(2),n=parseFloat(parseFloat(o[r].balance)+parseFloat(e)).toFixed(2),o[r].transactionHistory.push("<em>".concat(f.time_stamp(),"</em> : Withdrawn an amount of <strong>₱").concat(e,"</strong> from <strong>").concat(o[r].firstName,"</strong>'s account. From an initial account balance of <strong>₱").concat(n,"</strong>, ").concat(t," remaining account balance is now <strong>₱").concat(o[r].balance,"</strong>.")),alert("Withdrawal transaction from ".concat(o[r].firstName,"'s account has been successful!"))),localStorage.setItem("users",JSON.stringify(o))}},{key:"deposit",value:function(a,e){var t,n,o=f.userStorage(),r=o.findIndex(function(e){return e.accountNumber==a});null==o[r]||""==o[r]?alert("User not found!"):0==parseFloat(e)?alert("Enter an amount!"):(t="male"==o[r].gender?"his":"her",o[r].balance=parseFloat(parseFloat(o[r].balance)+parseFloat(e)).toFixed(2),n=parseFloat(parseFloat(o[r].balance)-parseFloat(e)).toFixed(2),o[r].transactionHistory.push("<em>".concat(f.time_stamp(),"</em> : Deposited an amount of <strong>₱").concat(e,"</strong> into <strong>").concat(o[r].firstName,"</strong>'s account. From an initial account balance of <strong>₱").concat(n,"</strong>, ").concat(t," account balance is now <strong>₱").concat(o[r].balance,"</strong>.")),alert("Deposit transaction from ".concat(o[r].firstName,"'s account has been successful!"))),localStorage.setItem("users",JSON.stringify(o))}},{key:"send",value:function(a,t,e){var n,o,r,c,s=f.userStorage(),i=s.findIndex(function(e){return e.accountNumber==a}),l=s.findIndex(function(e){return e.accountNumber==t});null!=s[i]&&""!=s[i]||null!=s[l]&&""!=s[l]?null==s[i]||""==s[i]?alert("Sender's account not found!"):null==s[l]||""==s[l]?alert("Receiver's account not found!"):parseFloat(s[i].balance)<parseFloat(e)?alert("Not enough money!"):0==parseFloat(e)?alert("Enter an amount!"):s[i].accountNumber==s[l].accountNumber?alert("Account number entries are not allowed!"):(n="male"==s[i].gender?"his":"her",o="male"==s[l].gender?"his":"her",s[i].balance=parseFloat(parseFloat(s[i].balance)-parseFloat(e)).toFixed(2),r=parseFloat(parseFloat(s[i].balance)+parseFloat(e)).toFixed(2),s[i].transactionHistory.push("<em>".concat(f.time_stamp(),"</em> : Sent an amount of <strong>₱").concat(e,"</strong> from <strong>").concat(s[i].firstName,"</strong>'s account into ").concat(s[l].firstName,"'s account. From <strong>").concat(s[i].firstName,"</strong>'s initial account balance of <strong>₱").concat(r,"</strong>, ").concat(n," remaining account balance is now <strong>₱").concat(s[i].balance,"</strong>.")),s[l].balance=parseFloat(parseFloat(s[l].balance)+parseFloat(e)).toFixed(2),c=parseFloat(parseFloat(s[l].balance)-parseFloat(e)).toFixed(2),s[l].transactionHistory.push("<em>".concat(f.time_stamp(),"</em> : Received an amount of <strong>₱").concat(e,"</strong> from ").concat(s[i].firstName,"'s account into <strong>").concat(s[l].firstName,"</strong>'s account. From <strong>").concat(s[l].firstName,"</strong>'s initial account balance of <strong>₱").concat(c,"</strong>, ").concat(o," account balance is now <strong>₱").concat(s[l].balance,"</strong>.")),alert("Successfuly sent money from ".concat(s[i].firstName,"'s account into ").concat(s[l].firstName,"'s account!"))):alert("Users not found!"),localStorage.setItem("users",JSON.stringify(s))}},{key:"get_balance",value:function(a,e){var t=f.userStorage(),n=t.findIndex(function(e){return e.accountNumber==a}),o=create_el("td");create_el("li");t[n]&&(o.innerHTML="₱".concat(num_commas(t[n].balance)),e.appendChild(o))}},{key:"list_users",value:function(){var m=f.userStorage();id("acc-table").innerHTML="";for(p=0;p<m.length;p++)!function(){var e=void 0,a=create_el("tr"),t=create_el("td"),n=create_el("td"),o=create_el("span"),r=create_el("td"),c=create_el("td"),s=create_el("div"),i=create_el("i"),l=create_el("ul"),d=create_el("li");for(t.innerHTML=num_space(m[p].accountNumber),a.appendChild(t),add_event(t,"click",function(){document.execCommand("copy")}),add_event(t,"copy",function(e){e.preventDefault(),e.clipboardData&&e.clipboardData.setData("text/plain",t.textContent)}),o.innerHTML="".concat(m[p].firstName," ").concat(m[p].middleName," ").concat(m[p].lastName),add_class(i,"far"),add_class(i,"fa-times-circle"),add_class(i,"fa-2x"),add_class(l,"xbul"),add_class(l,"wrap-scroll"),1==m[p].transactionHistory.length&&(d.innerHTML="No other transactions yet.",l.appendChild(d)),e=m[p].transactionHistory.length-1;0<=e;e--){var u=create_el("li");u.innerHTML=m[p].transactionHistory[e],add_class(u,"mb-05"),l.appendChild(u)}s.appendChild(i),s.appendChild(l),n.appendChild(o),n.appendChild(s),a.appendChild(n),add_event(o,"click",function(){add_class(s,"show")}),add_event(i,"click",function(){remove_class(s,"show")}),r.innerHTML=m[p].accountType,a.appendChild(r),c.innerHTML='<i id="'.concat(m.indexOf(m[p]),'" class="fas fa-minus-circle"></i>'),add_event(c.querySelector("i"),"click",function(){var e;"y"==prompt('Are you sure to delete this account?\nType "Y" for yes and "N" for no.',"N").toLowerCase()&&((e=JSON.parse(localStorage.getItem("users"))).splice(this.id,1),localStorage.setItem("users",JSON.stringify(e)),f.list_users())}),f.get_balance(m[p].accountNumber,a),a.appendChild(c),id("acc-table").appendChild(a)}()}},{key:"first_char",value:function(){qsel_all("[id*='-name']").forEach(function(e){add_event(e,"keyup",function(){0<e.value.length&&!(31<e.value.charCodeAt(0)&&(e.value.charCodeAt(0)<48||57<e.value.charCodeAt(0)))&&(alert("Invalid input!"),e.value="")})})}},{key:"negative_char",value:function(){qsel_all("[id*='-amount']").forEach(function(a){add_event(a,"keyup",function(e){189==(e.which||e.keyCode)&&(alert("Amount cannot be negative!"),a.id.includes("dec")?a.value="00":a.value="0")})})}},{key:"num_only",value:function(){qsel_all("[id*='-account']").forEach(function(e){add_att(e,"onkeypress","return num_only(event)")})}},{key:"reset",value:function(){qsel_all("form").forEach(function(e){e.reset()})}}]),f}();match_height(".mh"),m.list_users(),m.first_char(),m.negative_char(),m.num_only();function s(a,e,t,n,o,r,c){var s,i=m.userStorage(),l=i.findIndex(function(e){return e.firstName==a}),d=i.findIndex(function(e){return e.lastName==t});i[l]&&i[d]?alert("User already exists!"):((s=new u(a,e,t,n,o,r,c)).transactionHistory.push("<em>".concat(m.time_stamp(),"</em> : Opened a ").concat(s.accountType.toLowerCase()," account for <strong>").concat(s.firstName,"</strong> ").concat(s.middleName," ").concat(s.lastName,".")),m.addUser(s))}add_event(id("login-form"),"submit",function(e){return e.preventDefault(),"admin"==id("login-username").value&&"admin"==id("login-password").value&&toggle_class(id("modal"),"hide"),!1}),add_event(id("open-signup-btn"),"click",function(){toggle_class(id("login-wrap"),"hide"),toggle_class(id("signup-wrap"),"show")}),add_event(id("signup-form"),"submit",function(e){return e.preventDefault(),toggle_class(id("login-wrap"),"hide"),toggle_class(id("signup-wrap"),"show"),!1}),add_event(id("back-signup-btn"),"click",function(){toggle_class(id("login-wrap"),"hide"),toggle_class(id("signup-wrap"),"show")}),add_event(id("load-data-btn"),"click",function(e){e.preventDefault();var a=m.userStorage(),t=a.findIndex(function(e){return"JUAN"==e.firstName}),n=a.findIndex(function(e){return"DELA CRUZ"==e.lastName}),o=a.findIndex(function(e){return"JANE"==e.firstName}),r=a.findIndex(function(e){return"DOE"==e.lastName});return a[t]||a[n]||s("JUAN","HERMAN","DELA CRUZ","male","07"+(rand(9e9)+1e9),"Savings",2500.5.toFixed(2)),a[o]||a[r]||s("JANE","HILLS","DOE","female","02"+(rand(9e9)+1e9),"Checking",5200..toFixed(2)),m.list_users(),!1}),add_event(id("log-out-btn"),"click",function(e){return e.preventDefault(),toggle_class(id("modal"),"hide"),m.reset(),!1}),add_event(id("clear-all-btn"),"click",function(){if(0!=m.userStorage().length){var e=prompt('Are you sure to delete all stored datas?\nType "Y" for yes and "N" for no.',"N");if("y"!=(null!=e?e.toLowerCase():console.clear()))return;window.localStorage.clear(),m.list_users()}}),add_event(id("add-form"),"submit",function(e){e.preventDefault();var a=id("male").checked?"male":"female",t=id("savings").checked?["05","06","07","08","09"]:["01","02","03","04"],n=id("savings").checked?"Savings":"Checking",o=id("savings").checked?2e3:5e3,r=parseFloat(id("add-deposit-amount-dec").value)<10?"0".concat(parseFloat(id("add-deposit-amount-dec").value)):id("add-deposit-amount-dec").value,c="".concat(id("add-deposit-amount").value,".").concat(r);return 0!=id("add-first-name").value.length&&0!=id("add-last-name").value.length?(s(inner(id("add-first-name").value.toUpperCase()),inner(id("add-middle-name").value.toUpperCase()),inner(id("add-last-name").value.toUpperCase()),a,t[rand(t.length)]+(rand(9e9)+1e9),n,parseFloat(o+parseFloat(c)).toFixed(2)),m.list_users(),alert("".concat(id("add-first-name").value.toUpperCase(),"'s account have been successfully created!")),id("add-form").reset()):alert("Please complete the necessary details"),!1}),add_event(id("withdraw-form"),"submit",function(e){e.preventDefault();var a=parseFloat(id("withdraw-amount-dec").value)<10?"0".concat(parseFloat(id("withdraw-amount-dec").value)):id("withdraw-amount-dec").value,t="".concat(id("withdraw-amount").value,".").concat(a);return m.withdraw(inner(id("withdraw-account").value.split(" ").join("")),t),m.list_users(),id("withdraw-form").reset(),!1}),add_event(id("deposit-form"),"submit",function(e){e.preventDefault();var a=parseFloat(id("deposit-amount-dec").value)<10?"0".concat(parseFloat(id("deposit-amount-dec").value)):id("deposit-amount-dec").value,t="".concat(id("deposit-amount").value,".").concat(a);return m.deposit(inner(id("deposit-account").value.split(" ").join("")),t),m.list_users(),id("deposit-form").reset(),!1}),add_event(id("send-form"),"submit",function(e){e.preventDefault();var a=parseFloat(id("send-amount-dec").value)<10?"0".concat(parseFloat(id("send-amount-dec").value)):id("send-amount-dec").value,t="".concat(id("send-amount").value,".").concat(a);return m.send(inner(id("sender-account").value.split(" ").join("")),inner(id("receiver-account").value.split(" ").join("")),t),m.list_users(),id("send-form").reset(),!1})});