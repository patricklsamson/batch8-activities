"use strict";function _defineProperties(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,a,t){return a&&_defineProperties(e.prototype,a),t&&_defineProperties(e,t),e}function _classCallCheck(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}doc_ready(function(){function u(e,a,t,n,c,o,r){_classCallCheck(this,u),this.firstName=e,this.middleName=a,this.lastName=t,this.gender=n,this.accountNumber=c,this.accountType=o,this.balance=r,this.transactionHistory=[]}var m,f=function(){function p(){_classCallCheck(this,p)}return _createClass(p,null,[{key:"userStorage",value:function(){var e=null===localStorage.getItem("users")?[]:JSON.parse(localStorage.getItem("users"));return e}},{key:"addUser",value:function(e){var a=p.userStorage();a.push(e),localStorage.setItem("users",JSON.stringify(a))}},{key:"time_stamp",value:function(){var e=new Date,a=e.getMonth()<10?"0".concat(e.getMonth()+1):e.getMonth()+1,t=e.getDate()<10?"0".concat(e.getDate()):e.getDate(),n="".concat(a,"/").concat(t,"/").concat(e.getFullYear()),c=e.getHours()<10?"0".concat(e.getHours()):e.getHours(),o=e.getMinutes()<10?"0".concat(e.getMinutes()):e.getMinutes(),r=e.getSeconds()<10?"0".concat(e.getSeconds()):e.getSeconds(),i="".concat(c,":").concat(o,":").concat(r);return"".concat(n," - ").concat(i)}},{key:"withdraw",value:function(a,e){var t,n=p.userStorage(),c=n.findIndex(function(e){return e.accountNumber==a});null==n[c]||""==n[c]?alert("User not found!"):parseFloat(n[c].balance)<parseFloat(e)?alert("Not enough money!"):0==parseFloat(e)?alert("Enter an amount!"):(t="male"==n[c].gender?"His":"Her",n[c].balance=parseFloat(parseFloat(n[c].balance)-parseFloat(e)).toFixed(2),n[c].transactionHistory.push("".concat(p.time_stamp()," : ").concat(n[c].firstName," withdrew an amount of ₱").concat(e," from ").concat(t.charAt(0).toLowerCase()+t.substring(1)," account. ").concat(t," remaining account balance is now ₱").concat(n[c].balance,".")),alert("".concat(n[c].firstName,"'s withdrawal transaction is successful!"))),localStorage.setItem("users",JSON.stringify(n))}},{key:"deposit",value:function(a,e){var t,n=p.userStorage(),c=n.findIndex(function(e){return e.accountNumber==a});null==n[c]||""==n[c]?alert("User not found!"):0==parseFloat(e)?alert("Enter an amount!"):(t="male"==n[c].gender?"His":"Her",n[c].balance=parseFloat(parseFloat(n[c].balance)+parseFloat(e)).toFixed(2),n[c].transactionHistory.push("".concat(p.time_stamp()," : ").concat(n[c].firstName," deposited an amount of ₱").concat(e," into ").concat(t.charAt(0).toLowerCase()+t.substring(1)," account. ").concat(t," account balance is now ₱").concat(n[c].balance,".")),alert("".concat(n[c].firstName,"'s deposit transaction is successful!"))),localStorage.setItem("users",JSON.stringify(n))}},{key:"send",value:function(a,t,e){var n,c,o=p.userStorage(),r=o.findIndex(function(e){return e.accountNumber==a}),i=o.findIndex(function(e){return e.accountNumber==t});null!=o[r]&&""!=o[r]||null!=o[i]&&""!=o[i]?null==o[r]||""==o[r]?alert("Sender's account not found!"):null==o[i]||""==o[i]?alert("Receiver's account not found!"):parseFloat(o[r].balance)<parseFloat(e)?alert("Not enough money!"):0==parseFloat(e)?alert("Enter an amount!"):o[r].accountNumber==o[i].accountNumber?alert("Account number entries are not allowed!"):(n="male"==o[r].gender?"His":"Her",c="male"==o[i].gender?"His":"Her",o[r].balance=parseFloat(parseFloat(o[r].balance)-parseFloat(e)).toFixed(2),o[r].transactionHistory.push("".concat(p.time_stamp()," : ").concat(o[r].firstName," sent an amount of ₱").concat(e," into ").concat(o[i].firstName,"'s account. ").concat(n," remaining account balance is now ₱").concat(o[r].balance,".")),o[i].balance=parseFloat(parseFloat(o[i].balance)+parseFloat(e)).toFixed(2),o[i].transactionHistory.push("".concat(p.time_stamp()," : ").concat(o[i].firstName," received an amount of ₱").concat(e," from ").concat(o[r].firstName,"'s account. ").concat(c," account balance is now ₱").concat(o[i].balance,".")),alert("".concat(o[r].firstName," successfuly sent money into ").concat(o[i].firstName,"'s account!"))):alert("Users not found!"),localStorage.setItem("users",JSON.stringify(o))}},{key:"get_balance",value:function(a,e){var t=p.userStorage(),n=t.findIndex(function(e){return e.accountNumber==a}),c=create_el("td");create_el("li");t[n]&&(c.innerHTML="₱".concat(num_commas(t[n].balance)),e.appendChild(c))}},{key:"list_users",value:function(){var f=p.userStorage();id("acc-table").innerHTML="";for(m=0;m<f.length;m++)!function(){var e=void 0,a=create_el("tr"),t=create_el("td"),n=create_el("td"),c=create_el("span"),o=create_el("td"),r=create_el("td"),i=create_el("div"),s=create_el("i"),l=create_el("ul");if(t.innerHTML=num_space(f[m].accountNumber),a.appendChild(t),add_event(t,"click",function(){document.execCommand("copy")}),add_event(t,"copy",function(e){e.preventDefault(),e.clipboardData&&e.clipboardData.setData("text/plain",t.textContent)}),c.innerHTML="".concat(f[m].firstName," ").concat(f[m].middleName," ").concat(f[m].lastName),add_class(s,"far"),add_class(s,"fa-times-circle"),add_class(s,"fa-2x"),add_class(l,"xbul"),add_class(l,"wrap-scroll"),0==f[m].transactionHistory.length){var d=create_el("li");d.innerHTML="No transactions yet.",l.appendChild(d)}else for(e=0;e<f[m].transactionHistory.length;e++){var u=create_el("li");u.innerHTML=f[m].transactionHistory[e],l.appendChild(u)}i.appendChild(s),i.appendChild(l),n.appendChild(c),n.appendChild(i),a.appendChild(n),add_event(c,"click",function(){add_class(i,"show")}),add_event(s,"click",function(){remove_class(i,"show")}),o.innerHTML=f[m].accountType,a.appendChild(o),r.innerHTML='<i id="'.concat(f.indexOf(f[m]),'" class="fas fa-minus-circle"></i>'),add_event(r.querySelector("i"),"click",function(){var e;"y"==prompt('Are you sure to delete this account?\nType "Y" for yes and "N" for no.',"N").toLowerCase()&&((e=JSON.parse(localStorage.getItem("users"))).splice(this.id,1),localStorage.setItem("users",JSON.stringify(e)),p.list_users())}),p.get_balance(f[m].accountNumber,a),a.appendChild(r),id("acc-table").appendChild(a)}()}},{key:"first_char",value:function(){qsel_all("[id*='-name']").forEach(function(e){add_event(e,"keyup",function(){0<e.value.length&&!(31<e.value.charCodeAt(0)&&(e.value.charCodeAt(0)<48||57<e.value.charCodeAt(0)))&&(alert("Invalid input!"),e.value="")})})}},{key:"negative_char",value:function(){qsel_all("[id*='-amount']").forEach(function(a){add_event(a,"keyup",function(e){189==(e.which||e.keyCode)&&(alert("Amount cannot be negative!"),a.id.includes("dec")?a.value="00":a.value="0")})})}},{key:"num_only",value:function(){qsel_all("[id*='-account']").forEach(function(e){add_att(e,"onkeypress","return num_only(event)")})}},{key:"reset",value:function(){qsel_all("[id*='-name']").forEach(function(e){e.value=""}),qsel_all("[id*='-account']").forEach(function(e){e.value=""}),qsel_all("[id*='-amount']").forEach(function(e){e.id.includes("dec")?e.value="00":e.value="0"}),id("male").checked=!0,id("savings").checked=!0}}]),p}();match_height(".mh"),f.list_users(),f.first_char(),f.negative_char(),f.num_only();function i(a,e,t,n,c,o,r){var i,s=f.userStorage(),l=s.findIndex(function(e){return e.firstName==a}),d=s.findIndex(function(e){return e.lastName==t});s[l]&&s[d]?alert("User already exists!"):(i=new u(a,e,t,n,c,o,r),f.addUser(i))}add_event(id("login-form"),"submit",function(e){return e.preventDefault(),"admin"==id("login-username").value&&"admin"==id("login-password").value&&toggle_class(id("modal"),"hide"),!1}),add_event(id("open-signup-btn"),"click",function(){toggle_class(id("login-wrap"),"hide"),toggle_class(id("signup-wrap"),"show")}),add_event(id("signup-form"),"submit",function(e){return e.preventDefault(),toggle_class(id("login-wrap"),"hide"),toggle_class(id("signup-wrap"),"show"),!1}),add_event(id("back-signup-btn"),"click",function(){toggle_class(id("login-wrap"),"hide"),toggle_class(id("signup-wrap"),"show")}),add_event(id("load-data-btn"),"click",function(e){e.preventDefault();var a=f.userStorage(),t=a.findIndex(function(e){return"JUAN"==e.firstName}),n=a.findIndex(function(e){return"DELA CRUZ"==e.lastName}),c=a.findIndex(function(e){return"JANE"==e.firstName}),o=a.findIndex(function(e){return"DOE"==e.lastName});return a[t]||a[n]||i("JUAN","HERMAN","DELA CRUZ","male","07"+(rand(9e9)+1e9),"Savings",2500.5.toFixed(2)),a[c]||a[o]||i("JANE","HILLS","DOE","female","02"+(rand(9e9)+1e9),"Checking",5200..toFixed(2)),f.list_users(),!1}),add_event(id("log-out-btn"),"click",function(e){return e.preventDefault(),toggle_class(id("modal"),"hide"),f.reset(),!1}),add_event(id("clear-all-btn"),"click",function(){if(0!=f.userStorage().length){var e=prompt('Are you sure to delete all stored datas?\nType "Y" for yes and "N" for no.',"N");if("y"!=(null!=e?e.toLowerCase():console.clear()))return;window.localStorage.clear(),f.list_users()}}),add_event(id("add-form"),"submit",function(e){e.preventDefault();var a=id("male").checked?"male":"female",t=id("savings").checked?["05","06","07","08","09"]:["01","02","03","04"],n=id("savings").checked?"Savings":"Checking",c=id("savings").checked?2e3:5e3,o=parseFloat(id("add-deposit-amount-dec").value)<10?"0".concat(parseFloat(id("add-deposit-amount-dec").value)):id("add-deposit-amount-dec").value,r="".concat(id("add-deposit-amount").value,".").concat(o);return 0!=id("add-first-name").value.length&&0!=id("add-last-name").value.length?(i(inner(id("add-first-name").value.toUpperCase()),inner(id("add-middle-name").value.toUpperCase()),inner(id("add-last-name").value.toUpperCase()),a,t[rand(t.length)]+(rand(9e9)+1e9),n,parseFloat(c+parseFloat(r)).toFixed(2)),f.list_users(),alert("".concat(id("add-first-name").value.toUpperCase(),"'s account have been successfully created!")),f.reset()):alert("Please complete the necessary details"),!1}),add_event(id("withdraw-form"),"submit",function(e){e.preventDefault();var a=parseFloat(id("withdraw-amount-dec").value)<10?"0".concat(parseFloat(id("withdraw-amount-dec").value)):id("withdraw-amount-dec").value,t="".concat(id("withdraw-amount").value,".").concat(a);return f.withdraw(inner(id("withdraw-account").value.split(" ").join("")),t),f.list_users(),f.reset(),!1}),add_event(id("deposit-form"),"submit",function(e){e.preventDefault();var a=parseFloat(id("deposit-amount-dec").value)<10?"0".concat(parseFloat(id("deposit-amount-dec").value)):id("deposit-amount-dec").value,t="".concat(id("deposit-amount").value,".").concat(a);return f.deposit(inner(id("deposit-account").value.split(" ").join("")),t),f.list_users(),f.reset(),!1}),add_event(id("send-form"),"submit",function(e){e.preventDefault();var a=parseFloat(id("send-amount-dec").value)<10?"0".concat(parseFloat(id("send-amount-dec").value)):id("send-amount-dec").value,t="".concat(id("send-amount").value,".").concat(a);return f.send(inner(id("sender-account").value.split(" ").join("")),inner(id("receiver-account").value.split(" ").join("")),t),f.list_users(),f.reset(),!1})});