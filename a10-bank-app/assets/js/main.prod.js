"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),e}function _possibleConstructorReturn(e,n){return!n||"object"!==_typeof(n)&&"function"!=typeof n?_assertThisInitialized(e):n}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&_setPrototypeOf(e,n)}function _setPrototypeOf(e,n){return(_setPrototypeOf=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}doc_ready(function(){function a(e,n,t){_classCallCheck(this,a),this.username=e,this.password=n,this.adminId=t}var f,p=function(){function d(e,n,t,a,o,r,s,c,i,l){var u;return _classCallCheck(this,d),(u=_possibleConstructorReturn(this,_getPrototypeOf(d).call(this,e,n))).email=t,u.firstName=a,u.middleName=o,u.lastName=r,u.gender=s,u.accountNumber=c,u.accountType=i,u.balance=l,u.transactionHistory=[],u.userTransactionHistory=[],u.expenseItems=[],u.friends=[],u}return _inherits(d,a),d}(),g=function(){function h(){_classCallCheck(this,h)}return _createClass(h,null,[{key:"adminStorage",value:function(){var e=null===localStorage.getItem("admin")?[]:JSON.parse(localStorage.getItem("admin"));return e}},{key:"addAdmin",value:function(e){var n=h.adminStorage();n.push(e),localStorage.setItem("admin",JSON.stringify(n))}},{key:"userStorage",value:function(){var e=null===localStorage.getItem("users")?[]:JSON.parse(localStorage.getItem("users"));return e}},{key:"addUser",value:function(e){var n=h.userStorage();n.push(e),localStorage.setItem("users",JSON.stringify(n))}},{key:"login_user",value:function(n,t){var e,a=h.adminStorage(),o=h.userStorage(),r=a.findIndex(function(e){return e.username==n}),s=a.findIndex(function(e){return e.password==t}),c=o.findIndex(function(e){return e.username==n}),i=o.findIndex(function(e){return e.password==t});if(a[r]&&a[s])toggle_class(id("modal"),"hide"),add_class(id("friends-li"),"hide"),add_class(id("transactions-li"),"hide"),add_class(id("expense-wrap"),"hide");else if(o[c]&&o[i]){for(f=0;f<o.length;f++)o[f].username==n&&o[f].password==t&&(setTimeout(function(){toggle_class(id("modal"),"hide")},250),add_class(id("accounts-wrap"),"hide"),add_class(id("add-newaccount-wrap"),"hide"));for(id("owner").innerHTML="".concat(o[c].firstName," ").concat(o[c].middleName," ").concat(o[c].lastName),id("owner-acc-num").innerHTML=num_space(o[c].accountNumber),e=0;e<o[c].userTransactionHistory.length;e++){var l=create_el("li"),u=create_el("li");1==o[c].userTransactionHistory.length&&(u.innerHTML="No other transactions yet.",id("owner-transaction").appendChild(u)),l.innerHTML=o[c].userTransactionHistory[e],id("owner-transaction").appendChild(l)}}else alert("User not found!")}},{key:"signup_user",value:function(n,t,a,e,o,r,s,c){var i=h.userStorage(),l=i.findIndex(function(e){return e.firstName==n}),u=i.findIndex(function(e){return e.middleName==t}),d=i.findIndex(function(e){return e.lastName==a}),m=i.findIndex(function(e){return e.accountNumber==c}),f=i.findIndex(function(e){return e.username==o}),p=i.findIndex(function(e){return e.password==r}),g=i.findIndex(function(e){return e.email==s});null==i[l]||""==i[l]||null==i[u]||""==i[u]||null==i[d]||""==i[d]||i[m].gender!=e||null==i[m]||""==i[m]?alert("User not found!"):null==i[f]||""==i[f]||null==i[p]||""==i[p]||null==i[g]||""==i[g]?(toggle_class(id("login-wrap"),"hide"),toggle_class(id("signup-wrap"),"show"),i[m].username=o,i[m].password=r,i[m].email=s):alert("You have already signed up!"),localStorage.setItem("users",JSON.stringify(i))}},{key:"time_stamp",value:function(){var e=new Date,n=e.getMonth()<10?"0".concat(e.getMonth()+1):e.getMonth()+1,t=e.getDate()<10?"0".concat(e.getDate()):e.getDate(),a="".concat(n,"/").concat(t,"/").concat(e.getFullYear()),o=e.getHours()<10?"0".concat(e.getHours()):e.getHours(),r=e.getMinutes()<10?"0".concat(e.getMinutes()):e.getMinutes(),s=e.getSeconds()<10?"0".concat(e.getSeconds()):e.getSeconds(),c="".concat(o,":").concat(r,":").concat(s);return"".concat(a," - ").concat(c)}},{key:"withdraw",value:function(n,e){var t,a,o=h.userStorage(),r=o.findIndex(function(e){return e.accountNumber==n});null==o[r]||""==o[r]?alert("User not found!"):parseFloat(o[r].balance)<parseFloat(e)?alert("Not enough money!"):null==parseFloat(e)||""==parseFloat(e)?alert("Enter an amount!"):(t="male"==o[r].gender?"his":"her",o[r].balance=parseFloat(parseFloat(o[r].balance)-parseFloat(e)).toFixed(2),a=parseFloat(parseFloat(o[r].balance)+parseFloat(e)).toFixed(2),o[r].transactionHistory.unshift("<em>".concat(h.time_stamp(),"</em> : Withdrawn an amount of <strong>₱").concat(e,"</strong> from <strong>").concat(o[r].firstName,"</strong>'s account. From a previous account balance of <strong>₱").concat(a,"</strong>, ").concat(t," remaining account balance is now <strong>₱").concat(o[r].balance,"</strong>.")),o[r].userTransactionHistory.unshift("<em>".concat(h.time_stamp(),"</em> : You withdrawed an amount of <strong>₱").concat(e,"</strong> from your account. From a previous account balance of <strong>₱").concat(a,"</strong>, your remaining account balance is now <strong>₱").concat(o[r].balance,"</strong>.")),alert("Withdrawal transaction has been successful!")),localStorage.setItem("users",JSON.stringify(o))}},{key:"deposit",value:function(n,e){var t,a,o=h.userStorage(),r=o.findIndex(function(e){return e.accountNumber==n});null==o[r]||""==o[r]?alert("User not found!"):null==parseFloat(e)||""==parseFloat(e)?alert("Enter an amount!"):(t="male"==o[r].gender?"his":"her",o[r].balance=parseFloat(parseFloat(o[r].balance)+parseFloat(e)).toFixed(2),a=parseFloat(parseFloat(o[r].balance)-parseFloat(e)).toFixed(2),o[r].transactionHistory.unshift("<em>".concat(h.time_stamp(),"</em> : Deposited an amount of <strong>₱").concat(e,"</strong> into <strong>").concat(o[r].firstName,"</strong>'s account. From a previous account balance of <strong>₱").concat(a,"</strong>, ").concat(t," account balance is now <strong>₱").concat(o[r].balance,"</strong>.")),o[r].userTransactionHistory.unshift("<em>".concat(h.time_stamp(),"</em> : You deposited an amount of <strong>₱").concat(e,"</strong> into your account. From a previous account balance of <strong>₱").concat(a,"</strong>, your remaining account balance is now <strong>₱").concat(o[r].balance,"</strong>.")),alert("Deposit transaction account has been successful!")),localStorage.setItem("users",JSON.stringify(o))}},{key:"send",value:function(n,t,e){var a,o,r,s,c=h.userStorage(),i=c.findIndex(function(e){return e.accountNumber==n}),l=c.findIndex(function(e){return e.accountNumber==t});null!=c[i]&&""!=c[i]||null!=c[l]&&""!=c[l]?null==c[i]||""==c[i]?alert("Sender's account not found!"):null==c[l]||""==c[l]?alert("Receiver's account not found!"):parseFloat(c[i].balance)<parseFloat(e)?alert("Not enough money!"):null==parseFloat(e)||""==parseFloat(e)?alert("Enter an amount!"):c[i].accountNumber==c[l].accountNumber?alert("Account number entries are not allowed!"):(a="male"==c[i].gender?"his":"her",o="male"==c[l].gender?"his":"her",c[i].balance=parseFloat(parseFloat(c[i].balance)-parseFloat(e)).toFixed(2),r=parseFloat(parseFloat(c[i].balance)+parseFloat(e)).toFixed(2),c[i].transactionHistory.unshift("<em>".concat(h.time_stamp(),"</em> : Sent an amount of <strong>₱").concat(e,"</strong> from <strong>").concat(c[i].firstName,"</strong>'s account into ").concat(c[l].firstName,"'s account. From <strong>").concat(c[i].firstName,"</strong>'s previous account balance of <strong>₱").concat(r,"</strong>, ").concat(a," remaining account balance is now <strong>₱").concat(c[i].balance,"</strong>.")),c[i].userTransactionHistory.unshift("<em>".concat(h.time_stamp(),"</em> : You sent an amount of <strong>₱").concat(e,"</strong> from your account into ").concat(c[l].firstName,"'s account. From a previous account balance of <strong>₱").concat(r,"</strong>, your remaining account balance is now <strong>₱").concat(c[i].balance,"</strong>.")),c[l].balance=parseFloat(parseFloat(c[l].balance)+parseFloat(e)).toFixed(2),s=parseFloat(parseFloat(c[l].balance)-parseFloat(e)).toFixed(2),c[l].transactionHistory.unshift("<em>".concat(h.time_stamp(),"</em> : Received an amount of <strong>₱").concat(e,"</strong> from ").concat(c[i].firstName,"'s account into <strong>").concat(c[l].firstName,"</strong>'s account. From <strong>").concat(c[l].firstName,"</strong>'s previous account balance of <strong>₱").concat(s,"</strong>, ").concat(o," account balance is now <strong>₱").concat(c[l].balance,"</strong>.")),c[l].userTransactionHistory.unshift("<em>".concat(h.time_stamp(),"</em> : You received an amount of <strong>₱").concat(e,"</strong> from ").concat(c[i].firstName,"'s account into your account. From a previous account balance of <strong>₱").concat(s,"</strong>, your account balance is now <strong>₱").concat(c[l].balance,"</strong>.")),alert("Money transfer transaction has been successful!")):alert("Users not found!"),localStorage.setItem("users",JSON.stringify(c))}},{key:"get_balance",value:function(n,e){var t=h.userStorage(),a=t.findIndex(function(e){return e.accountNumber==n}),o=create_el("td");t[a]&&(o.innerHTML="₱".concat(num_commas(t[a].balance)),e.appendChild(o))}},{key:"list_users",value:function(){var m=h.userStorage();id("acc-table").innerHTML="";for(f=0;f<m.length;f++)!function(){var e=void 0,n=create_el("tr"),t=create_el("td"),a=create_el("td"),o=create_el("span"),r=create_el("td"),s=create_el("td"),c=create_el("div"),i=create_el("i"),l=create_el("ul"),u=create_el("li");for(t.innerHTML=num_space(m[f].accountNumber),n.appendChild(t),add_event(t,"click",function(){document.execCommand("copy")}),add_event(t,"copy",function(e){e.preventDefault(),e.clipboardData&&e.clipboardData.setData("text/plain",t.textContent)}),o.innerHTML="".concat(m[f].firstName," ").concat(m[f].middleName," ").concat(m[f].lastName),add_class(i,"far"),add_class(i,"fa-times-circle"),add_class(i,"fa-2x"),add_class(l,"xbul"),add_class(l,"wrap-scroll"),1==m[f].transactionHistory.length&&(u.innerHTML="No other transactions yet.",l.appendChild(u)),e=0;e<m[f].transactionHistory.length;e++){var d=create_el("li");d.innerHTML=m[f].transactionHistory[e],add_class(d,"mb-05"),l.appendChild(d)}c.appendChild(i),c.appendChild(l),a.appendChild(o),a.appendChild(c),n.appendChild(a),add_event(o,"click",function(){add_class(c,"show")}),add_event(i,"click",function(){remove_class(c,"show")}),r.innerHTML=m[f].accountType,n.appendChild(r),s.innerHTML='<i id="'.concat(m.indexOf(m[f]),'" class="fas fa-minus-circle"></i>'),add_event(s.querySelector("i"),"click",function(){var e=prompt('Are you sure to delete this account?\nType "Y" for yes and "N" for no.',"N");"y"==(null!=e?e.toLowerCase():console.clear())&&(m.splice(this.id,1),localStorage.setItem("users",JSON.stringify(m)),h.list_users())}),h.get_balance(m[f].accountNumber,n),n.appendChild(s),id("acc-table").appendChild(n)}()}},{key:"first_char",value:function(){qsel_all("[id*='-name']").forEach(function(e){add_event(e,"keyup",function(){0<e.value.length&&!(31<e.value.charCodeAt(0)&&(e.value.charCodeAt(0)<48||57<e.value.charCodeAt(0)))&&(alert("Invalid input!"),e.value="")})})}},{key:"negative_char",value:function(){qsel_all("[id*='-amount']").forEach(function(n){add_event(n,"keyup",function(e){189==(e.which||e.keyCode)&&(alert("Amount cannot be negative!"),n.id.includes("dec")?n.value="00":n.value="")})})}},{key:"num_only",value:function(){qsel_all("[id*='-account']").forEach(function(e){add_att(e,"onkeypress","return num_only(event)")}),qsel_all("[id*='-amount']").forEach(function(e){add_att(e,"onkeypress","return num_only(event)")})}},{key:"type_comma",value:function(){qsel_all("[id*='-amount']").forEach(function(n){add_event(n,"keyup",function(e){37<=e.which&&e.which<=40||37<=e.keyCode&&e.keyCode<=40||(n.value=n.value.replace(/,/gi,"").split(/(?=(?:\d{3})+$)/).join(","))})})}},{key:"dec_addZero",value:function(){qsel_all("[id*='-dec']").forEach(function(e){add_event(e,"change",function(){isNaN(e.value)||1!=e.value.length||(e.value="0".concat(e.value))})})}},{key:"password_match",value:function(){add_event(id("signup-password"),"keyup",function(){this.value==id("signup-confirm-password").value&&0!=this.value.length?(remove_class(id("match-msg"),"fa-times"),add_class(id("match-msg"),"fa-check")):this.value!=id("signup-confirm-password").value&&1<=id("signup-confirm-password").value.length?(remove_class(id("match-msg"),"fa-check"),add_class(id("match-msg"),"fa-times")):0==this.value.length&&(remove_class(id("match-msg"),"fa-check"),remove_class(id("match-msg"),"fa-times"))}),add_event(id("signup-confirm-password"),"keyup",function(){this.value==id("signup-password").value&&0!=this.value.length?(remove_class(id("match-msg"),"fa-times"),add_class(id("match-msg"),"fa-check")):this.value!=id("signup-password").value&&1<=id("signup-password").value.length?(remove_class(id("match-msg"),"fa-check"),add_class(id("match-msg"),"fa-times")):0==this.value.length&&(remove_class(id("match-msg"),"fa-check"),remove_class(id("match-msg"),"fa-times"))})}},{key:"reset",value:function(){qsel_all("form").forEach(function(e){e.reset()})}}]),h}();match_height(".mh"),g.list_users(),g.first_char(),g.negative_char(),g.num_only(),g.type_comma(),g.dec_addZero(),g.password_match();var e,n,t,o,r,s;n=e="admin",t="1",r=g.adminStorage(),s=r.findIndex(function(e){return e.adminId==t}),r[s]||(o=new a(e,n,t),g.addAdmin(o));function c(e,n,t,a,o,r,s,c,i,l){var u,d=g.userStorage(),m=d.findIndex(function(e){return e.firstName==a}),f=d.findIndex(function(e){return e.lastName==r});d[m]&&d[f]?alert("User already exists!"):((u=new p(e,n,t,a,o,r,s,c,i,l)).transactionHistory.push("<em>".concat(g.time_stamp(),"</em> : Opened a ").concat(u.accountType.toLowerCase()," account for <strong>").concat(u.firstName,"</strong> ").concat(u.middleName," ").concat(u.lastName," with an initial account balance of <strong>₱").concat(u.balance,"</strong>.")),u.userTransactionHistory.push("<em>".concat(g.time_stamp(),"</em> : You have opened a ").concat(u.accountType.toLowerCase()," account with an initial account balance of <strong>₱").concat(u.balance,"</strong>.")),g.addUser(u))}add_event(id("load-data-btn"),"click",function(){var e=g.userStorage(),n=e.findIndex(function(e){return"JUAN"==e.firstName}),t=e.findIndex(function(e){return"DELA CRUZ"==e.lastName}),a=e.findIndex(function(e){return"JANE"==e.firstName}),o=e.findIndex(function(e){return"DOE"==e.lastName});if(!e[n]&&!e[t]){var r=prompt('Continuing will load initial data for immediate testing purposes?\nType "Y" to continue or "N" otherwise.',"Y"),s=null!=r?r.toLowerCase():console.clear();if("n"==s||null==s||""==s)return;c("juandelacruz","juanjuan","juandelacruz@mail.com","JUAN","","DELA CRUZ","male","071096025466","Savings",2500.05.toFixed(2))}e[a]||e[o]||c("","","","JANE","HILLS","DOE","female","023451282250","Checking",5200..toFixed(2)),g.list_users()}),add_event(id("clear-all-btn"),"click",function(){if(0!=g.userStorage().length){var e=prompt('Are you sure to delete all stored datas?\nType "Y" for yes and "N" for no.',"N");if("y"!=(null!=e?e.toLowerCase():console.clear()))return;localStorage.removeItem("users"),g.list_users()}}),add_event(id("add-form"),"submit",function(e){e.preventDefault();var n=id("male").checked?"male":"female",t=id("savings").checked?["05","06","07","08","09"]:["00","01","02","03","04"],a=id("savings").checked?"Savings":"Checking",o=id("savings").checked?2e3:5e3,r=0==id("add-deposit-amount").value.length?"0":id("add-deposit-amount").value.split(",").join(""),s="".concat(r,".").concat(id("add-deposit-amount-dec").value);return c("","","",inner(id("add-first-name").value.toUpperCase()),inner(id("add-middle-name").value.toUpperCase()),inner(id("add-last-name").value.toUpperCase()),n,t[rand(t.length)]+(rand(9e9)+1e9),a,parseFloat(o+parseFloat(s)).toFixed(2)),g.list_users(),alert("".concat(id("add-first-name").value.toUpperCase(),"'s account have been successfully created!")),id("add-form").reset(),!1}),add_event(id("login-form"),"submit",function(e){return e.preventDefault(),g.login_user(id("login-username").value,id("login-password").value),!1}),add_event(id("log-out-btn"),"click",function(e){return e.preventDefault(),toggle_class(id("modal"),"hide"),setTimeout(function(){remove_class(id("friends-li"),"hide"),remove_class(id("transactions-li"),"hide"),remove_class(id("accounts-wrap"),"hide"),remove_class(id("expense-wrap"),"hide"),remove_class(id("add-newaccount-wrap"),"hide")},500),g.reset(),!1}),add_event(id("open-signup-btn"),"click",function(){toggle_class(id("login-wrap"),"hide"),toggle_class(id("signup-wrap"),"show")}),add_event(id("signup-form"),"submit",function(e){if(e.preventDefault(),id("signup-password").value==id("signup-confirm-password").value){var n=id("signup-male").checked?"male":"female";return g.signup_user(id("signup-first-name").value.toUpperCase(),id("signup-middle-name").value.toUpperCase(),id("signup-last-name").value.toUpperCase(),n,id("signup-username").value,id("signup-password").value,id("signup-email").value,id("signup-account-num").value.split(" ").join("")),id("signup-form").reset(),remove_class(id("match-msg"),"fa-check"),remove_class(id("match-msg"),"fa-times"),!1}}),add_event(id("back-signup-btn"),"click",function(){toggle_class(id("login-wrap"),"hide"),toggle_class(id("signup-wrap"),"show"),remove_class(id("match-msg"),"fa-check"),remove_class(id("match-msg"),"fa-times"),g.reset()}),add_event(id("owner-transaction-btn"),"click",function(){add_class(id("owner-transaction-modal"),"show")}),add_event(id("close-owner-transaction-btn"),"click",function(){remove_class(id("owner-transaction-modal"),"show")}),add_event(id("withdraw-form"),"submit",function(e){e.preventDefault();var n="".concat(id("withdraw-amount").value.split(",").join(""),".").concat(id("withdraw-amount-dec").value);return g.withdraw(inner(id("withdraw-account").value.split(" ").join("")),n),g.list_users(),id("withdraw-form").reset(),!1}),add_event(id("deposit-form"),"submit",function(e){e.preventDefault();var n="".concat(id("deposit-amount").value.split(",").join(""),".").concat(id("deposit-amount-dec").value);return g.deposit(inner(id("deposit-account").value.split(" ").join("")),n),g.list_users(),id("deposit-form").reset(),!1}),add_event(id("send-form"),"submit",function(e){e.preventDefault();var n="".concat(id("send-amount").value.split(",").join(""),".").concat(id("send-amount-dec").value);return g.send(inner(id("sender-account").value.split(" ").join("")),inner(id("receiver-account").value.split(" ").join("")),n),g.list_users(),id("send-form").reset(),!1})});