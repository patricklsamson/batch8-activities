"use strict";function _defineProperties(e,a){for(var n=0;n<a.length;n++){var t=a[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function _createClass(e,a,n){return a&&_defineProperties(e.prototype,a),n&&_defineProperties(e,n),e}function _classCallCheck(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}doc_ready(function(){function u(e,a,n,t,i,r,c){_classCallCheck(this,u),this.firstName=e,this.middleName=a,this.lastName=n,this.gender=t,this.accountNumber=i,this.accountType=r,this.balance=c,this.transactionHistory=[]}var f,p=function(){function p(){_classCallCheck(this,p)}return _createClass(p,null,[{key:"userStorage",value:function(){var e=null===localStorage.getItem("users")?[]:JSON.parse(localStorage.getItem("users"));return e}},{key:"addUser",value:function(e){var a=p.userStorage();a.push(e),localStorage.setItem("users",JSON.stringify(a))}},{key:"withdraw",value:function(a,e){var n,t=p.userStorage(),i=t.findIndex(function(e){return e.accountNumber==a});null==t[i]||""==t[i]?alert("User not found!"):parseFloat(t[i].balance)<parseFloat(e)?alert("Balance cannot be negative!"):0==parseFloat(e)?alert("Enter an amount!"):(n="male"==t[i].gender?"His":"Her",t[i].balance=parseFloat(parseFloat(t[i].balance)-parseFloat(e)).toFixed(2),t[i].transactionHistory.push("".concat(t[i].firstName," withdrew an amount of ₱").concat(e," from ").concat(n.charAt(0).toLowerCase()+n.substring(1)," account. ").concat(n," remaining balance is now ₱").concat(t[i].balance,"."))),localStorage.setItem("users",JSON.stringify(t))}},{key:"deposit",value:function(a,e){var n,t=p.userStorage(),i=t.findIndex(function(e){return e.accountNumber==a});null==t[i]||""==t[i]?alert("User not found!"):0==parseFloat(e)?alert("Enter an amount!"):(n="male"==t[i].gender?"His":"Her",t[i].balance=parseFloat(parseFloat(t[i].balance)+parseFloat(e)).toFixed(2),t[i].transactionHistory.push("".concat(t[i].firstName," deposited an amount of ₱").concat(e," into ").concat(n.charAt(0).toLowerCase()+n.substring(1)," account. ").concat(n," remaining balance is now ₱").concat(t[i].balance,"."))),localStorage.setItem("users",JSON.stringify(t))}},{key:"send",value:function(a,n,e){var t,i,r=p.userStorage(),c=r.findIndex(function(e){return e.accountNumber==a}),o=r.findIndex(function(e){return e.accountNumber==n});null==r[c]||""==r[c]||null==r[o]||""==r[o]?alert("Users not found!"):parseFloat(r[c].balance)<parseFloat(e)?alert("Balance cannot be negative!"):0==parseFloat(e)?alert("Enter an amount!"):r[c].accountNumber==r[o].accountNumber?alert("Account number entries are not allowed!"):(t="male"==r[c].gender?"His":"Her",i="male"==r[o].gender?"His":"Her",r[c].balance=parseFloat(parseFloat(r[c].balance)-parseFloat(e)).toFixed(2),r[c].transactionHistory.push("".concat(r[c].firstName," sent an amount of ₱").concat(e," into ").concat(r[o].firstName,"'s account. ").concat(t," remaining balance is now ₱").concat(r[c].balance,".")),r[o].balance=parseFloat(parseFloat(r[o].balance)+parseFloat(e)).toFixed(2),r[o].transactionHistory.push("".concat(r[o].firstName," received an amount of ₱").concat(e," from ").concat(r[c].firstName,"'s account. ").concat(i," remaining balance is now ₱").concat(r[o].balance,"."))),localStorage.setItem("users",JSON.stringify(r))}},{key:"get_balance",value:function(a){var e=p.userStorage(),n=e.findIndex(function(e){return e.accountNumber==a}),t=create_el("li");e[n]&&(t.innerHTML="₱".concat(num_commas(e[n].balance)),id("balance-ul").appendChild(t))}},{key:"list_users",value:function(){var u=p.userStorage();id("acc-num-ul").innerHTML="",id("acc-ul").innerHTML="",id("acc-type-ul").innerHTML="",id("balance-ul").innerHTML="",id("delete-ul").innerHTML="";for(f=0;f<u.length;f++)!function(){var e=void 0,a=create_el("li"),n=create_el("li"),t=create_el("span"),i=create_el("li"),r=create_el("li"),c=create_el("div"),o=create_el("i"),d=create_el("ul");if(a.innerHTML=num_space(u[f].accountNumber),id("acc-num-ul").appendChild(a),add_event(a,"click",function(){document.execCommand("copy")}),add_event(a,"copy",function(e){e.preventDefault(),e.clipboardData&&e.clipboardData.setData("text/plain",a.textContent)}),t.innerHTML="".concat(u[f].firstName," ").concat(u[f].middleName," ").concat(u[f].lastName),add_class(o,"far"),add_class(o,"fa-times-circle"),add_class(d,"xbul"),d.id="h".concat(u.indexOf(u[f])),0==u[f].transactionHistory.length){var l=create_el("li");l.innerHTML="No transactions yet.",d.appendChild(l)}else for(e=0;e<u[f].transactionHistory.length;e++){var s=create_el("li");s.innerHTML=u[f].transactionHistory[e],d.appendChild(s)}c.appendChild(o),c.appendChild(d),n.appendChild(t),n.appendChild(c),id("acc-ul").appendChild(n),add_event(t,"click",function(){add_class(c,"show")}),add_event(o,"click",function(){remove_class(c,"show")}),i.innerHTML=u[f].accountType,id("acc-type-ul").appendChild(i),r.innerHTML='<i id="'.concat(u.indexOf(u[f]),'" class="fas fa-minus-circle"></i>'),id("delete-ul").appendChild(r),add_event(r.querySelector("i"),"click",function(){var e=JSON.parse(localStorage.getItem("users"));e.splice(this.id,1),localStorage.setItem("users",JSON.stringify(e)),p.list_users()}),p.get_balance(u[f].accountNumber)}()}},{key:"firstChar",value:function(){qsel_all("[id*='-name']").forEach(function(e){add_event(e,"keyup",function(){0<e.value.length&&!(31<e.value.charCodeAt(0)&&(e.value.charCodeAt(0)<48||57<e.value.charCodeAt(0)))&&(alert("Invalid input!"),e.value="")})})}}]),p}();p.list_users(),p.firstChar();function o(a,e,n,t,i,r,c){var o,d=p.userStorage(),l=d.findIndex(function(e){return e.firstName==a}),s=d.findIndex(function(e){return e.lastName==n});d[l]&&d[s]?alert("User already exists!"):(o=new u(a,e,n,t,i,r,c),p.addUser(o))}add_event(id("login-form"),"submit",function(e){return e.preventDefault(),"admin"==id("login-username").value&&"admin"==id("login-password").value&&toggle_class(id("modal"),"hide"),!1}),add_event(id("open-signup-btn"),"click",function(){toggle_class(id("login-wrap"),"hide"),toggle_class(id("signup-wrap"),"show")}),add_event(id("signup-form"),"submit",function(e){return e.preventDefault(),toggle_class(id("login-wrap"),"hide"),toggle_class(id("signup-wrap"),"show"),!1}),add_event(id("back-signup-btn"),"click",function(){toggle_class(id("login-wrap"),"hide"),toggle_class(id("signup-wrap"),"show")}),add_event(id("load-data-btn"),"click",function(e){e.preventDefault();var a=p.userStorage(),n=a.findIndex(function(e){return"JUAN"==e.firstName}),t=a.findIndex(function(e){return"DELA CRUZ"==e.lastName}),i=a.findIndex(function(e){return"JANE"==e.firstName}),r=a.findIndex(function(e){return"DOE"==e.lastName});return a[n]||a[t]||o("JUAN","HERMOSA","DELA CRUZ","male","07"+(rand(9e9)+1e9),"Savings",2500..toFixed(2)),a[i]||a[r]||o("JANE","HILLS","DOE","female","02"+(rand(9e9)+1e9),"Checking",5200..toFixed(2)),p.list_users(),!1}),add_event(id("log-out-btn"),"click",function(e){return e.preventDefault(),toggle_class(id("modal"),"hide"),!1}),add_event(id("clear-all-btn"),"click",function(){"y"==prompt('Are you sure to delete all stored datas?\nType "Y" for yes and "N" for no.',"N").toLowerCase()&&(window.localStorage.clear(),p.list_users())}),add_event(id("add-form"),"submit",function(e){e.preventDefault();var a=id("male").checked?"male":"female",n=id("savings").checked?["05","06","07","08","09"]:["01","02","03","04"],t=id("savings").checked?"Savings":"Checking",i=id("savings").checked?2e3:5e3,r=parseFloat(id("add-deposit-dec").value)<10?"0".concat(parseFloat(id("add-deposit-dec").value)):id("add-deposit-dec").value,c="".concat(id("add-deposit").value,".").concat(r);return 0!=id("add-first-name").value.length&&0!=id("add-last-name").value.length?(o(inner(id("add-first-name").value.toUpperCase()),inner(id("add-middle-name").value.toUpperCase()),inner(id("add-last-name").value.toUpperCase()),a,n[rand(n.length)]+(rand(9e9)+1e9),t,parseFloat(i+parseFloat(c)).toFixed(2)),p.list_users(),id("add-first-name").value="",id("add-middle-name").value="",id("add-last-name").value="",id("male").checked=!0,id("savings").checked=!0,id("add-deposit").value="0",id("add-deposit-dec").value="00"):alert("Please complete the necessary details"),!1}),add_event(id("withdraw-form"),"submit",function(e){e.preventDefault();var a=parseFloat(id("withdraw-amount-dec").value)<10?"0".concat(parseFloat(id("withdraw-amount-dec").value)):id("withdraw-amount-dec").value,n="".concat(id("withdraw-amount").value,".").concat(a);return p.withdraw(inner(id("withdraw-account").value.split(" ").join("")),n),p.list_users(),id("withdraw-account").value="",id("withdraw-amount").value="0",!(id("withdraw-amount-dec").value="00")}),add_event(id("deposit-form"),"submit",function(e){e.preventDefault();var a=parseFloat(id("deposit-amount-dec").value)<10?"0".concat(parseFloat(id("deposit-amount-dec").value)):id("deposit-amount-dec").value,n="".concat(id("deposit-amount").value,".").concat(a);return p.deposit(inner(id("deposit-account").value.split(" ").join("")),n),p.list_users(),id("deposit-account").value="",id("deposit-amount").value="0",!(id("deposit-amount-dec").value="00")}),add_event(id("send-form"),"submit",function(e){e.preventDefault();var a=parseFloat(id("send-amount-dec").value)<10?"0".concat(parseFloat(id("send-amount-dec").value)):id("send-amount-dec").value,n="".concat(id("send-amount").value,".").concat(a);return p.send(inner(id("sender-account").value.split(" ").join("")),inner(id("receiver-account").value.split(" ").join("")),n),p.list_users(),id("sender-account").value="",id("receiver-account").value="",id("send-amount").value="0",!(id("send-amount-dec").value="00")})});