"use strict";function _defineProperties(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,a,t){return a&&_defineProperties(e.prototype,a),t&&_defineProperties(e,t),e}function _classCallCheck(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}doc_ready(function(){function u(e,a,t,n,c,o,i){_classCallCheck(this,u),this.firstName=e,this.middleName=a,this.lastName=t,this.gender=n,this.accountNumber=c,this.accountType=o,this.balance=i,this.transactionHistory=[]}var p,f=function(){function f(){_classCallCheck(this,f)}return _createClass(f,null,[{key:"userStorage",value:function(){var e=null===localStorage.getItem("users")?[]:JSON.parse(localStorage.getItem("users"));return e}},{key:"addUser",value:function(e){var a=f.userStorage();a.push(e),localStorage.setItem("users",JSON.stringify(a))}},{key:"time_stamp",value:function(){var e=new Date,a=e.getMonth()<10?"0".concat(e.getMonth()+1):e.getMonth()+1,t=e.getDate()<10?"0".concat(e.getDate()):e.getDate(),n="".concat(a,"/").concat(t,"/").concat(e.getFullYear()),c=e.getHours()<10?"0".concat(e.getHours()):e.getHours(),o=e.getMinutes()<10?"0".concat(e.getMinutes()):e.getMinutes(),i=e.getSeconds()<10?"0".concat(e.getSeconds()):e.getSeconds(),r="".concat(c,":").concat(o,":").concat(i);return"".concat(n," - ").concat(r)}},{key:"withdraw",value:function(a,e){var t,n=f.userStorage(),c=n.findIndex(function(e){return e.accountNumber==a});null==n[c]||""==n[c]?alert("User not found!"):parseFloat(n[c].balance)<parseFloat(e)?alert("Not enough money!"):0==parseFloat(e)?alert("Enter an amount!"):(t="male"==n[c].gender?"His":"Her",n[c].balance=parseFloat(parseFloat(n[c].balance)-parseFloat(e)).toFixed(2),n[c].transactionHistory.push("".concat(f.time_stamp()," : ").concat(n[c].firstName," withdrew an amount of ₱").concat(e," from ").concat(t.charAt(0).toLowerCase()+t.substring(1)," account. ").concat(t," remaining account balance is now ₱").concat(n[c].balance,".")),alert("".concat(n[c].firstName,"'s withdrawal transaction is successful!"))),localStorage.setItem("users",JSON.stringify(n))}},{key:"deposit",value:function(a,e){var t,n=f.userStorage(),c=n.findIndex(function(e){return e.accountNumber==a});null==n[c]||""==n[c]?alert("User not found!"):0==parseFloat(e)?alert("Enter an amount!"):(t="male"==n[c].gender?"His":"Her",n[c].balance=parseFloat(parseFloat(n[c].balance)+parseFloat(e)).toFixed(2),n[c].transactionHistory.push("".concat(f.time_stamp()," : ").concat(n[c].firstName," deposited an amount of ₱").concat(e," into ").concat(t.charAt(0).toLowerCase()+t.substring(1)," account. ").concat(t," account balance is now ₱").concat(n[c].balance,".")),alert("".concat(n[c].firstName,"'s deposit transaction is successful!"))),localStorage.setItem("users",JSON.stringify(n))}},{key:"send",value:function(a,t,e){var n,c,o=f.userStorage(),i=o.findIndex(function(e){return e.accountNumber==a}),r=o.findIndex(function(e){return e.accountNumber==t});null==o[i]||""==o[i]?alert("Sender's account not found!"):null==o[r]||""==o[r]?alert("Receiver's account not found!"):parseFloat(o[i].balance)<parseFloat(e)?alert("Not enough money!"):0==parseFloat(e)?alert("Enter an amount!"):o[i].accountNumber==o[r].accountNumber?alert("Account number entries are not allowed!"):(n="male"==o[i].gender?"His":"Her",c="male"==o[r].gender?"His":"Her",o[i].balance=parseFloat(parseFloat(o[i].balance)-parseFloat(e)).toFixed(2),o[i].transactionHistory.push("".concat(f.time_stamp()," : ").concat(o[i].firstName," sent an amount of ₱").concat(e," into ").concat(o[r].firstName,"'s account. ").concat(n," remaining account balance is now ₱").concat(o[i].balance,".")),o[r].balance=parseFloat(parseFloat(o[r].balance)+parseFloat(e)).toFixed(2),o[r].transactionHistory.push("".concat(f.time_stamp()," : ").concat(o[r].firstName," received an amount of ₱").concat(e," from ").concat(o[i].firstName,"'s account. ").concat(c," account balance is now ₱").concat(o[r].balance,".")),alert("".concat(o[i].firstName," successfuly sent money into ").concat(o[r].firstName,"'s account!"))),localStorage.setItem("users",JSON.stringify(o))}},{key:"get_balance",value:function(a){var e=f.userStorage(),t=e.findIndex(function(e){return e.accountNumber==a}),n=create_el("li");e[t]&&(n.innerHTML="₱".concat(num_commas(e[t].balance)),id("balance-ul").appendChild(n))}},{key:"list_users",value:function(){var u=f.userStorage();id("acc-num-ul").innerHTML="",id("acc-ul").innerHTML="",id("acc-type-ul").innerHTML="",id("balance-ul").innerHTML="",id("delete-ul").innerHTML="";for(p=0;p<u.length;p++)!function(){var e=void 0,a=create_el("li"),t=create_el("li"),n=create_el("span"),c=create_el("li"),o=create_el("li"),i=create_el("div"),r=create_el("i"),s=create_el("ul");if(a.innerHTML=num_space(u[p].accountNumber),id("acc-num-ul").appendChild(a),add_event(a,"click",function(){document.execCommand("copy")}),add_event(a,"copy",function(e){e.preventDefault(),e.clipboardData&&e.clipboardData.setData("text/plain",a.textContent)}),n.innerHTML="".concat(u[p].firstName," ").concat(u[p].middleName," ").concat(u[p].lastName),add_class(r,"far"),add_class(r,"fa-times-circle"),add_class(r,"fa-2x"),add_class(s,"xbul"),add_class(s,"wrap-scroll"),0==u[p].transactionHistory.length){var l=create_el("li");l.innerHTML="No transactions yet.",s.appendChild(l)}else for(e=0;e<u[p].transactionHistory.length;e++){var d=create_el("li");d.innerHTML=u[p].transactionHistory[e],s.appendChild(d)}i.appendChild(r),i.appendChild(s),t.appendChild(n),t.appendChild(i),id("acc-ul").appendChild(t),add_event(n,"click",function(){add_class(i,"show")}),add_event(r,"click",function(){remove_class(i,"show")}),c.innerHTML=u[p].accountType,id("acc-type-ul").appendChild(c),o.innerHTML='<i id="'.concat(u.indexOf(u[p]),'" class="fas fa-minus-circle"></i>'),id("delete-ul").appendChild(o),add_event(o.querySelector("i"),"click",function(){var e;"y"==prompt('Are you sure to delete this account?\nType "Y" for yes and "N" for no.',"N").toLowerCase()&&((e=JSON.parse(localStorage.getItem("users"))).splice(this.id,1),localStorage.setItem("users",JSON.stringify(e)),f.list_users())}),f.get_balance(u[p].accountNumber)}()}},{key:"first_char",value:function(){qsel_all("[id*='-name']").forEach(function(e){add_event(e,"keyup",function(){0<e.value.length&&!(31<e.value.charCodeAt(0)&&(e.value.charCodeAt(0)<48||57<e.value.charCodeAt(0)))&&(alert("Invalid input!"),e.value="")})})}},{key:"negative_char",value:function(){qsel_all("[id*='-amount']").forEach(function(a){add_event(a,"keyup",function(e){189==(e.which||e.keyCode)&&(alert("Amount cannot be negative!"),a.id.includes("dec")?a.value="00":a.value="0")})})}},{key:"num_only",value:function(){qsel_all("[id*='-account']").forEach(function(e){add_att(e,"onkeypress","return num_only(event)")})}},{key:"reset",value:function(){qsel_all("[id*='-name']").forEach(function(e){e.value=""}),qsel_all("[id*='-account']").forEach(function(e){e.value=""}),qsel_all("[id*='-amount']").forEach(function(e){e.id.includes("dec")?e.value="00":e.value="0"}),id("male").checked=!0,id("savings").checked=!0}}]),f}();match_height(".mh"),f.list_users(),f.first_char(),f.negative_char(),f.num_only();function r(a,e,t,n,c,o,i){var r,s=f.userStorage(),l=s.findIndex(function(e){return e.firstName==a}),d=s.findIndex(function(e){return e.lastName==t});s[l]&&s[d]?alert("User already exists!"):(r=new u(a,e,t,n,c,o,i),f.addUser(r))}add_event(id("login-form"),"submit",function(e){return e.preventDefault(),"admin"==id("login-username").value&&"admin"==id("login-password").value&&toggle_class(id("modal"),"hide"),!1}),add_event(id("open-signup-btn"),"click",function(){toggle_class(id("login-wrap"),"hide"),toggle_class(id("signup-wrap"),"show")}),add_event(id("signup-form"),"submit",function(e){return e.preventDefault(),toggle_class(id("login-wrap"),"hide"),toggle_class(id("signup-wrap"),"show"),!1}),add_event(id("back-signup-btn"),"click",function(){toggle_class(id("login-wrap"),"hide"),toggle_class(id("signup-wrap"),"show")}),add_event(id("load-data-btn"),"click",function(e){e.preventDefault();var a=f.userStorage(),t=a.findIndex(function(e){return"JUAN"==e.firstName}),n=a.findIndex(function(e){return"DELA CRUZ"==e.lastName}),c=a.findIndex(function(e){return"JANE"==e.firstName}),o=a.findIndex(function(e){return"DOE"==e.lastName});return a[t]||a[n]||r("JUAN","HERMAN","DELA CRUZ","male","07"+(rand(9e9)+1e9),"Savings",2500.5.toFixed(2)),a[c]||a[o]||r("JANE","HILLS","DOE","female","02"+(rand(9e9)+1e9),"Checking",5200..toFixed(2)),f.list_users(),!1}),add_event(id("log-out-btn"),"click",function(e){return e.preventDefault(),toggle_class(id("modal"),"hide"),f.reset(),!1}),add_event(id("clear-all-btn"),"click",function(){"y"==prompt('Are you sure to delete all stored datas?\nType "Y" for yes and "N" for no.',"N").toLowerCase()&&(window.localStorage.clear(),f.list_users())}),add_event(id("add-form"),"submit",function(e){e.preventDefault();var a=id("male").checked?"male":"female",t=id("savings").checked?["05","06","07","08","09"]:["01","02","03","04"],n=id("savings").checked?"Savings":"Checking",c=id("savings").checked?2e3:5e3,o=parseFloat(id("add-deposit-dec").value)<10?"0".concat(parseFloat(id("add-deposit-dec").value)):id("add-deposit-dec").value,i="".concat(id("add-deposit-amount").value,".").concat(o);return 0!=id("add-first-name").value.length&&0!=id("add-last-name").value.length?(r(inner(id("add-first-name").value.toUpperCase()),inner(id("add-middle-name").value.toUpperCase()),inner(id("add-last-name").value.toUpperCase()),a,t[rand(t.length)]+(rand(9e9)+1e9),n,parseFloat(c+parseFloat(i)).toFixed(2)),f.list_users(),alert("".concat(id("add-first-name").value.toUpperCase(),"'s account have been successfully created!")),f.reset()):alert("Please complete the necessary details"),!1}),add_event(id("withdraw-form"),"submit",function(e){e.preventDefault();var a=parseFloat(id("withdraw-amount-dec").value)<10?"0".concat(parseFloat(id("withdraw-amount-dec").value)):id("withdraw-amount-dec").value,t="".concat(id("withdraw-amount").value,".").concat(a);return f.withdraw(inner(id("withdraw-account").value.split(" ").join("")),t),f.list_users(),f.reset(),!1}),add_event(id("deposit-form"),"submit",function(e){e.preventDefault();var a=parseFloat(id("deposit-amount-dec").value)<10?"0".concat(parseFloat(id("deposit-amount-dec").value)):id("deposit-amount-dec").value,t="".concat(id("deposit-amount").value,".").concat(a);return f.deposit(inner(id("deposit-account").value.split(" ").join("")),t),f.list_users(),f.reset(),!1}),add_event(id("send-form"),"submit",function(e){e.preventDefault();var a=parseFloat(id("send-amount-dec").value)<10?"0".concat(parseFloat(id("send-amount-dec").value)):id("send-amount-dec").value,t="".concat(id("send-amount").value,".").concat(a);return f.send(inner(id("sender-account").value.split(" ").join("")),inner(id("receiver-account").value.split(" ").join("")),t),f.list_users(),f.reset(),!1})});