"use strict";function _defineProperties(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,a,t){return a&&_defineProperties(e.prototype,a),t&&_defineProperties(e,t),e}function _classCallCheck(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}doc_ready(function(){function u(e,a,t,n,i,c,r){_classCallCheck(this,u),this.firstName=e,this.middleName=a,this.lastName=t,this.gender=n,this.accountNumber=i,this.accountType=c,this.balance=r,this.transactionHistory=[]}var f,p=function(){function p(){_classCallCheck(this,p)}return _createClass(p,null,[{key:"userStorage",value:function(){var e=null===localStorage.getItem("users")?[]:JSON.parse(localStorage.getItem("users"));return e}},{key:"addUser",value:function(e){var a=p.userStorage();a.push(e),localStorage.setItem("users",JSON.stringify(a))}},{key:"withdraw",value:function(a,e){var t,n=p.userStorage(),i=n.findIndex(function(e){return e.accountNumber==a});null==n[i]||""==n[i]?alert("User not found!"):parseFloat(n[i].balance)<parseFloat(e)?alert("Balance cannot be negative!"):0==parseFloat(e)?alert("Enter an amount!"):(t="male"==n[i].gender?"His":"Her",n[i].balance=parseFloat(parseFloat(n[i].balance)-parseFloat(e)).toFixed(2),n[i].transactionHistory.push("".concat(n[i].firstName," withdrew an amount of ₱").concat(e," from ").concat(t.charAt(0).toLowerCase()+t.substring(1)," account. ").concat(t," remaining account balance is now ₱").concat(n[i].balance,".")),alert("".concat(n[i].firstName,"'s withdrawal transaction is successful!"))),localStorage.setItem("users",JSON.stringify(n))}},{key:"deposit",value:function(a,e){var t,n=p.userStorage(),i=n.findIndex(function(e){return e.accountNumber==a});null==n[i]||""==n[i]?alert("User not found!"):0==parseFloat(e)?alert("Enter an amount!"):(t="male"==n[i].gender?"His":"Her",n[i].balance=parseFloat(parseFloat(n[i].balance)+parseFloat(e)).toFixed(2),n[i].transactionHistory.push("".concat(n[i].firstName," deposited an amount of ₱").concat(e," into ").concat(t.charAt(0).toLowerCase()+t.substring(1)," account. ").concat(t," account balance is now ₱").concat(n[i].balance,".")),alert("".concat(n[i].firstName,"'s deposit transaction is successful!"))),localStorage.setItem("users",JSON.stringify(n))}},{key:"send",value:function(a,t,e){var n,i,c=p.userStorage(),r=c.findIndex(function(e){return e.accountNumber==a}),o=c.findIndex(function(e){return e.accountNumber==t});null==c[r]||""==c[r]||null==c[o]||""==c[o]?alert("Users not found!"):parseFloat(c[r].balance)<parseFloat(e)?alert("Balance cannot be negative!"):0==parseFloat(e)?alert("Enter an amount!"):c[r].accountNumber==c[o].accountNumber?alert("Account number entries are not allowed!"):(n="male"==c[r].gender?"His":"Her",i="male"==c[o].gender?"His":"Her",c[r].balance=parseFloat(parseFloat(c[r].balance)-parseFloat(e)).toFixed(2),c[r].transactionHistory.push("".concat(c[r].firstName," sent an amount of ₱").concat(e," into ").concat(c[o].firstName,"'s account. ").concat(n," remaining account balance is now ₱").concat(c[r].balance,".")),c[o].balance=parseFloat(parseFloat(c[o].balance)+parseFloat(e)).toFixed(2),c[o].transactionHistory.push("".concat(c[o].firstName," received an amount of ₱").concat(e," from ").concat(c[r].firstName,"'s account. ").concat(i," account balance is now ₱").concat(c[o].balance,".")),alert("".concat(c[r].firstName," successfuly sent money into ").concat(c[o].firstName,"'s account!"))),localStorage.setItem("users",JSON.stringify(c))}},{key:"get_balance",value:function(a){var e=p.userStorage(),t=e.findIndex(function(e){return e.accountNumber==a}),n=create_el("li");e[t]&&(n.innerHTML="₱".concat(num_commas(e[t].balance)),id("balance-ul").appendChild(n))}},{key:"list_users",value:function(){var u=p.userStorage();id("acc-num-ul").innerHTML="",id("acc-ul").innerHTML="",id("acc-type-ul").innerHTML="",id("balance-ul").innerHTML="",id("delete-ul").innerHTML="";for(f=0;f<u.length;f++)!function(){var e=void 0,a=create_el("li"),t=create_el("li"),n=create_el("span"),i=create_el("li"),c=create_el("li"),r=create_el("div"),o=create_el("i"),l=create_el("ul");if(a.innerHTML=num_space(u[f].accountNumber),id("acc-num-ul").appendChild(a),add_event(a,"click",function(){document.execCommand("copy")}),add_event(a,"copy",function(e){e.preventDefault(),e.clipboardData&&e.clipboardData.setData("text/plain",a.textContent)}),n.innerHTML="".concat(u[f].firstName," ").concat(u[f].middleName," ").concat(u[f].lastName),add_class(o,"far"),add_class(o,"fa-times-circle"),add_class(l,"xbul"),l.id="h".concat(u.indexOf(u[f])),0==u[f].transactionHistory.length){var d=create_el("li");d.innerHTML="No transactions yet.",l.appendChild(d)}else for(e=0;e<u[f].transactionHistory.length;e++){var s=create_el("li");s.innerHTML=u[f].transactionHistory[e],l.appendChild(s)}r.appendChild(o),r.appendChild(l),t.appendChild(n),t.appendChild(r),id("acc-ul").appendChild(t),add_event(n,"click",function(){add_class(r,"show")}),add_event(o,"click",function(){remove_class(r,"show")}),i.innerHTML=u[f].accountType,id("acc-type-ul").appendChild(i),c.innerHTML='<i id="'.concat(u.indexOf(u[f]),'" class="fas fa-minus-circle"></i>'),id("delete-ul").appendChild(c),add_event(c.querySelector("i"),"click",function(){var e=JSON.parse(localStorage.getItem("users"));e.splice(this.id,1),localStorage.setItem("users",JSON.stringify(e)),p.list_users()}),p.get_balance(u[f].accountNumber)}()}},{key:"firstChar",value:function(){qsel_all("[id*='-name']").forEach(function(e){add_event(e,"keyup",function(){0<e.value.length&&!(31<e.value.charCodeAt(0)&&(e.value.charCodeAt(0)<48||57<e.value.charCodeAt(0)))&&(alert("Invalid input!"),e.value="")})})}}]),p}();p.list_users(),p.firstChar();function o(a,e,t,n,i,c,r){var o,l=p.userStorage(),d=l.findIndex(function(e){return e.firstName==a}),s=l.findIndex(function(e){return e.lastName==t});l[d]&&l[s]?alert("User already exists!"):(o=new u(a,e,t,n,i,c,r),p.addUser(o))}add_event(id("login-form"),"submit",function(e){return e.preventDefault(),"admin"==id("login-username").value&&"admin"==id("login-password").value&&toggle_class(id("modal"),"hide"),!1}),add_event(id("open-signup-btn"),"click",function(){toggle_class(id("login-wrap"),"hide"),toggle_class(id("signup-wrap"),"show")}),add_event(id("signup-form"),"submit",function(e){return e.preventDefault(),toggle_class(id("login-wrap"),"hide"),toggle_class(id("signup-wrap"),"show"),!1}),add_event(id("back-signup-btn"),"click",function(){toggle_class(id("login-wrap"),"hide"),toggle_class(id("signup-wrap"),"show")}),add_event(id("load-data-btn"),"click",function(e){e.preventDefault();var a=p.userStorage(),t=a.findIndex(function(e){return"JUAN"==e.firstName}),n=a.findIndex(function(e){return"DELA CRUZ"==e.lastName}),i=a.findIndex(function(e){return"JANE"==e.firstName}),c=a.findIndex(function(e){return"DOE"==e.lastName});return a[t]||a[n]||o("JUAN","HERMOSA","DELA CRUZ","male","07"+(rand(9e9)+1e9),"Savings",2500..toFixed(2)),a[i]||a[c]||o("JANE","HILLS","DOE","female","02"+(rand(9e9)+1e9),"Checking",5200..toFixed(2)),p.list_users(),!1}),add_event(id("log-out-btn"),"click",function(e){return e.preventDefault(),toggle_class(id("modal"),"hide"),!1}),add_event(id("clear-all-btn"),"click",function(){"y"==prompt('Are you sure to delete all stored datas?\nType "Y" for yes and "N" for no.',"N").toLowerCase()&&(window.localStorage.clear(),p.list_users())}),add_event(id("add-form"),"submit",function(e){e.preventDefault();var a=id("male").checked?"male":"female",t=id("savings").checked?["05","06","07","08","09"]:["01","02","03","04"],n=id("savings").checked?"Savings":"Checking",i=id("savings").checked?2e3:5e3,c=parseFloat(id("add-deposit-dec").value)<10?"0".concat(parseFloat(id("add-deposit-dec").value)):id("add-deposit-dec").value,r="".concat(id("add-deposit").value,".").concat(c);return 0!=id("add-first-name").value.length&&0!=id("add-last-name").value.length?(o(inner(id("add-first-name").value.toUpperCase()),inner(id("add-middle-name").value.toUpperCase()),inner(id("add-last-name").value.toUpperCase()),a,t[rand(t.length)]+(rand(9e9)+1e9),n,parseFloat(i+parseFloat(r)).toFixed(2)),p.list_users(),alert("".concat(id("add-first-name").value.toUpperCase(),"'s account have been successfully created!")),id("add-first-name").value="",id("add-middle-name").value="",id("add-last-name").value="",id("male").checked=!0,id("savings").checked=!0,id("add-deposit").value="0",id("add-deposit-dec").value="00"):alert("Please complete the necessary details"),!1}),add_event(id("withdraw-form"),"submit",function(e){e.preventDefault();var a=parseFloat(id("withdraw-amount-dec").value)<10?"0".concat(parseFloat(id("withdraw-amount-dec").value)):id("withdraw-amount-dec").value,t="".concat(id("withdraw-amount").value,".").concat(a);return p.withdraw(inner(id("withdraw-account").value.split(" ").join("")),t),p.list_users(),id("withdraw-account").value="",id("withdraw-amount").value="0",!(id("withdraw-amount-dec").value="00")}),add_event(id("deposit-form"),"submit",function(e){e.preventDefault();var a=parseFloat(id("deposit-amount-dec").value)<10?"0".concat(parseFloat(id("deposit-amount-dec").value)):id("deposit-amount-dec").value,t="".concat(id("deposit-amount").value,".").concat(a);return p.deposit(inner(id("deposit-account").value.split(" ").join("")),t),p.list_users(),id("deposit-account").value="",id("deposit-amount").value="0",!(id("deposit-amount-dec").value="00")}),add_event(id("send-form"),"submit",function(e){e.preventDefault();var a=parseFloat(id("send-amount-dec").value)<10?"0".concat(parseFloat(id("send-amount-dec").value)):id("send-amount-dec").value,t="".concat(id("send-amount").value,".").concat(a);return p.send(inner(id("sender-account").value.split(" ").join("")),inner(id("receiver-account").value.split(" ").join("")),t),p.list_users(),id("sender-account").value="",id("receiver-account").value="",id("send-amount").value="0",!(id("send-amount-dec").value="00")})});