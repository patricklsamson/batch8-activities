"use strict";function _defineProperties(e,a){for(var n=0;n<a.length;n++){var t=a[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function _createClass(e,a,n){return a&&_defineProperties(e.prototype,a),n&&_defineProperties(e,n),e}function _classCallCheck(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}doc_ready(function(){function u(e,a,n,t,i,r,o){_classCallCheck(this,u),this.firstName=e,this.middleName=a,this.lastName=n,this.gender=t,this.accountNumber=i,this.accountType=r,this.balance=o,this.transactionHistory=[]}var l,p=function(){function d(){_classCallCheck(this,d)}return _createClass(d,null,[{key:"userStorage",value:function(){var e=null===localStorage.getItem("users")?[]:JSON.parse(localStorage.getItem("users"));return e}},{key:"addUser",value:function(e){var a=d.userStorage();a.push(e),localStorage.setItem("users",JSON.stringify(a))}},{key:"withdraw",value:function(a,e){var n,t=d.userStorage(),i=t.findIndex(function(e){return e.accountNumber==a});null==t[i]||""==t[i]?alert("User not found!"):parseFloat(t[i].balance)<parseFloat(e)?alert("Balance cannot be negative!"):0==parseFloat(e)?alert("Enter an amount!"):(n="male"==t[i].gender?"His":"Her",t[i].balance=parseFloat(parseFloat(t[i].balance)-parseFloat(e)).toFixed(2),t[i].transactionHistory.push("".concat(t[i].firstName," withdrew an amount of ₱").concat(e," from ").concat(n.charAt(0).toLowerCase()+n.substring(1)," account. ").concat(n," remaining balance is now ₱").concat(t[i].balance,"."))),localStorage.setItem("users",JSON.stringify(t))}},{key:"deposit",value:function(a,e){var n,t=d.userStorage(),i=t.findIndex(function(e){return e.accountNumber==a});null==t[i]||""==t[i]?alert("User not found!"):0==parseFloat(e)?alert("Enter an amount!"):(n="male"==t[i].gender?"His":"Her",t[i].balance=parseFloat(parseFloat(t[i].balance)+parseFloat(e)).toFixed(2),t[i].transactionHistory.push("".concat(t[i].firstName," deposited an amount of ₱").concat(e," into ").concat(n.charAt(0).toLowerCase()+n.substring(1)," account. ").concat(n," remaining balance is now ₱").concat(t[i].balance,"."))),localStorage.setItem("users",JSON.stringify(t))}},{key:"send",value:function(a,n,e){var t,i,r=d.userStorage(),o=r.findIndex(function(e){return e.accountNumber==a}),c=r.findIndex(function(e){return e.accountNumber==n});null==r[o]||""==r[o]||null==r[c]||""==r[c]?alert("Users not found!"):parseFloat(r[o].balance)<parseFloat(e)?alert("Balance cannot be negative!"):0==parseFloat(e)?alert("Enter an amount!"):(t="male"==r[o].gender?"His":"Her",i="male"==r[c].gender?"His":"Her",r[o].balance=parseFloat(parseFloat(r[o].balance)-parseFloat(e)).toFixed(2),r[o].transactionHistory.push("".concat(r[o].firstName," sent an amount of ₱").concat(e," into ").concat(r[c].firstName,"'s account. ").concat(t," remaining balance is now ₱").concat(r[o].balance,".")),r[c].balance=parseFloat(parseFloat(r[c].balance)+parseFloat(e)).toFixed(2),r[c].transactionHistory.push("".concat(r[c].firstName," received an amount of ₱").concat(e," from ").concat(r[o].firstName,"'s account. ").concat(i," remaining balance is now ₱").concat(r[c].balance,"."))),localStorage.setItem("users",JSON.stringify(r))}},{key:"get_balance",value:function(a){var e=d.userStorage(),n=e.findIndex(function(e){return e.accountNumber==a}),t=create_el("li");e[n]&&(t.innerHTML="₱".concat(num_commas(e[n].balance)),id("balance-ul").appendChild(t))}},{key:"list_users",value:function(){var c=d.userStorage();id("acc-num-ul").innerHTML="",id("acc-ul").innerHTML="",id("acc-type-ul").innerHTML="",id("balance-ul").innerHTML="",id("delete-ul").innerHTML="";for(l=0;l<c.length;l++)!function(){var e=void 0,a=create_el("li"),n=create_el("li"),t=create_el("li"),i=create_el("li"),r=create_el("ul");for(a.innerHTML=num_space(c[l].accountNumber),id("acc-num-ul").appendChild(a),add_event(a,"click",function(){document.execCommand("copy")}),add_event(a,"copy",function(e){e.preventDefault(),e.clipboardData&&e.clipboardData.setData("text/plain",a.textContent)}),n.innerHTML="".concat(c[l].firstName," ").concat(c[l].middleName," ").concat(c[l].lastName),id("acc-ul").appendChild(n),n.appendChild(r),add_class(r,"xbul"),r.id="h".concat(c.indexOf(c[l])),e=0;e<c[l].transactionHistory.length;e++){var o=create_el("li");o.innerHTML=c[l].transactionHistory[e],r.appendChild(o)}t.innerHTML=c[l].accountType,id("acc-type-ul").appendChild(t),i.innerHTML='<i id="'.concat(c.indexOf(c[l]),'" class="fas fa-minus-circle"></i>'),id("delete-ul").appendChild(i),add_event(i.querySelector("i"),"click",function(){var e=JSON.parse(localStorage.getItem("users"));e.splice(this.id,1),localStorage.setItem("users",JSON.stringify(e)),d.list_users()}),d.get_balance(c[l].accountNumber)}()}},{key:"firstChar",value:function(){qsel_all("[id*='-name']").forEach(function(e){add_event(e,"keyup",function(){0<e.value.length&&!(31<e.value.charCodeAt(0)&&(e.value.charCodeAt(0)<48||57<e.value.charCodeAt(0)))&&(alert("Invalid input!"),e.value="")})})}}]),d}();p.list_users(),p.firstChar();function c(a,e,n,t,i,r,o){var c,d=p.userStorage(),l=d.findIndex(function(e){return e.firstName==a}),s=d.findIndex(function(e){return e.lastName==n});d[l]&&d[s]?alert("User already exists!"):(c=new u(a,e,n,t,i,r,o),p.addUser(c))}add_event(id("login-form"),"submit",function(e){return e.preventDefault(),"admin"==id("login-username").value&&"admin"==id("login-password").value&&toggle_class(id("modal"),"hide"),!1}),add_event(id("open-signup-btn"),"click",function(){toggle_class(id("login-wrap"),"hide"),toggle_class(id("signup-wrap"),"show")}),add_event(id("signup-form"),"submit",function(e){return e.preventDefault(),toggle_class(id("login-wrap"),"hide"),toggle_class(id("signup-wrap"),"show"),!1}),add_event(id("back-signup-btn"),"click",function(){toggle_class(id("login-wrap"),"hide"),toggle_class(id("signup-wrap"),"show")}),add_event(id("load-data-btn"),"click",function(e){e.preventDefault();var a=p.userStorage(),n=a.findIndex(function(e){return"JUAN"==e.firstName}),t=a.findIndex(function(e){return"DELA CRUZ"==e.lastName}),i=a.findIndex(function(e){return"JANE"==e.firstName}),r=a.findIndex(function(e){return"DOE"==e.lastName});return a[n]||a[t]||c("JUAN","HERMOSA","DELA CRUZ","male","07"+(rand(9e9)+1e9),"Savings",2500..toFixed(2)),a[i]||a[r]||c("JANE","HILLS","DOE","female","02"+(rand(9e9)+1e9),"Checking",5200..toFixed(2)),p.list_users(),!1}),add_event(id("log-out-btn"),"click",function(e){return e.preventDefault(),toggle_class(id("modal"),"hide"),!1}),add_event(id("clear-all-btn"),"click",function(){"y"==prompt('Are you sure to delete all stored datas?\nType "Y" for yes and "N" for no.',"N").toLowerCase()&&(window.localStorage.clear(),p.list_users())}),add_event(id("add-form"),"submit",function(e){e.preventDefault();var a=id("male").checked?"male":"female",n=id("savings").checked?["05","06","07","08","09"]:["01","02","03","04"],t=id("savings").checked?"Savings":"Checking",i=id("savings").checked?2e3:5e3,r=parseFloat(id("add-deposit-dec").value)<10?"0".concat(parseFloat(id("add-deposit-dec").value)):id("add-deposit-dec").value,o="".concat(id("add-deposit").value,".").concat(r);return 0!=id("add-first-name").value.length&&0!=id("add-last-name").value.length?(c(inner(id("add-first-name").value.toUpperCase()),inner(id("add-middle-name").value.toUpperCase()),inner(id("add-last-name").value.toUpperCase()),a,n[rand(n.length)]+(rand(9e9)+1e9),t,parseFloat(i+parseFloat(o)).toFixed(2)),p.list_users(),id("add-first-name").value="",id("add-middle-name").value="",id("add-last-name").value="",id("male").checked=!0,id("savings").checked=!0,id("add-deposit").value="0",id("add-deposit-dec").value="00"):alert("Please complete the necessary details"),!1}),add_event(id("withdraw-form"),"submit",function(e){e.preventDefault();var a=parseFloat(id("withdraw-amount-dec").value)<10?"0".concat(parseFloat(id("withdraw-amount-dec").value)):id("withdraw-amount-dec").value,n="".concat(id("withdraw-amount").value,".").concat(a);return p.withdraw(inner(id("withdraw-account").value.split(" ").join("")),n),p.list_users(),id("withdraw-account").value="",id("withdraw-amount").value="0",!(id("withdraw-amount-dec").value="00")}),add_event(id("deposit-form"),"submit",function(e){e.preventDefault();var a=parseFloat(id("deposit-amount-dec").value)<10?"0".concat(parseFloat(id("deposit-amount-dec").value)):id("deposit-amount-dec").value,n="".concat(id("deposit-amount").value,".").concat(a);return p.deposit(inner(id("deposit-account").value.split(" ").join("")),n),p.list_users(),id("deposit-account").value="",id("deposit-amount").value="0",!(id("deposit-amount-dec").value="00")}),add_event(id("send-form"),"submit",function(e){e.preventDefault();var a=parseFloat(id("send-amount-dec").value)<10?"0".concat(parseFloat(id("send-amount-dec").value)):id("send-amount-dec").value,n="".concat(id("send-amount").value,".").concat(a);return p.send(inner(id("sender-account").value.split(" ").join("")),inner(id("receiver-account").value.split(" ").join("")),n),p.list_users(),id("sender-account").value="",id("receiver-account").value="",id("send-amount").value="0",!(id("send-amount-dec").value="00")})});